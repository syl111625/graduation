<!DOCTYPE html>
<html>

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title> - 百度ECHarts</title>
		<meta name="keywords" content="">
		<meta name="description" content="">

		<link rel="shortcut icon" href="favicon.ico">
		<link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
		<link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">

		<link href="css/animate.css" rel="stylesheet">
		<link href="css/style.css?v=4.1.0" rel="stylesheet">
		<style type="text/css">
			.iboxHeight {
				height: 600px;
			}
			
			.iboxBlue {
				background: skyblue;
			}
			
			.ibox-tools {
				position: relative;
			}
			
			.eAppearance {
				height: 500px;
			}
			
			.posrig {
				position: absolute;
				top: -8px;
				height: 28px;
				border-radius: 5px;
			}
			
			.chooseDev {
				right: 350px;
			}
			
			.chooseDay {
				right: 200px;
			}
			
			.addWeek {
				right: 120px;
			}
			
			.check {
				right: 50px;
			}
			
			.help {
				right: 5px;
				line-height: 28px;
			}
		</style>
	</head>
<!--数据分析/单设备数据分析-->
	<body class="gray-bg">

		<div class="wrapper wrapper-content animated fadeInRight">
			<div class="row">
<!--周能耗分析-->
				<div class="col-sm-12">
					<div class="ibox iboxHeight">
						<div class="ibox-title iboxBlue">
							<h5>周能耗分析</h5>
							<div class="ibox-tools">
								<!--<button class="btn btn-info posrig chooseDev">选择设备</button>-->
								<select name="" class="posrig chooseDev devWeek">
									<option value="1">电表1</option>
								</select>
								<input placeholder="选择查询日期" type="date" class="posrig chooseDay timeWeek" >
								<select name="" class="posrig addWeek optionWeek">
									<option value="1">第1周</option>
								</select>
								<button class="btn btn-info posrig check checkWeek">查询</button>
								<a href="singleDevice.html" class="btn btn-warning btn-xs posrig help">帮助</a>
							</div>
						</div>
						<div class="ibox-content ">

							<div class="col-sm-6">
								<div class="echarts eAppearance" id="echarts-line-chartWeek"></div>
							</div>
							<div class="col-sm-6">

								<div class="echarts eAppearance" id="echarts-pie-chartWeek"></div>
							</div>

						</div>

					</div>
<!--月能耗分析-->
					<div class="ibox iboxHeight">
						<div class="ibox-title iboxBlue">
							<h5>月能耗分析</h5>
							<div class="ibox-tools">
								<!--<button class="btn btn-info posrig chooseDev">选择设备</button>-->
								<select name="" class="posrig chooseDev">
									<option value="1">电表1</option>
								</select>

								<input placeholder="选择查询日期" type="date" class="layer-date posrig chooseDay" id="start">
								<select name="" class="posrig addWeek">
									<option value="1">第1周</option>
								</select>
								<button class="btn btn-info posrig check">查询</button>
								<a href="singleDevice.html" class="btn btn-warning btn-xs posrig help">帮助</a>
							</div>
						</div>
						<div class="ibox-content ">

							<div class="col-sm-6">
								<div class="echarts eAppearance" id="echarts-line-chartMonth"></div>
							</div>
							<div class="col-sm-6">

								<div class="echarts eAppearance" id="echarts-pie-chartMonth"></div>
							</div>

						</div>

					</div>
					
<!--年能耗分析-->					
					<div class="ibox iboxHeight">
						<div class="ibox-title iboxBlue">
							<h5>年能耗分析</h5>
							<div class="ibox-tools">
								<!--<button class="btn btn-info posrig chooseDev">选择设备</button>-->
								<select name="" class="posrig chooseDev">
									<option value="1">电表1</option>
								</select>

								<input placeholder="选择查询日期" type="date" class="layer-date posrig chooseDay" id="start">
								<select name="" class="posrig addWeek">
									<option value="1">第1周</option>
								</select>
								<button class="btn btn-info posrig check">查询</button>
								<a href="singleDevice.html" class="btn btn-warning btn-xs posrig help">帮助</a>
							</div>
						</div>
						<div class="ibox-content ">

							<div class="col-sm-6">
								<div class="echarts eAppearance" id="echarts-line-chartYear"></div>
							</div>
							<div class="col-sm-6">

								<div class="echarts eAppearance" id="echarts-pie-chartYear"></div>
							</div>

						</div>

					</div>

				</div>
			</div>
		</div>
		</div>

		</div>
		<!-- 全局js -->
		<script src="js/jquery.min.js" ></script>
		<script src="js/bootstrap.min.js" ></script>

		<!-- ECharts -->
		<script src="js/plugins/echarts/echarts-all.js"></script>
		<script src="js/demo/echartsDemoALLPie.js"></script>
		<!-- 自定义js -->
		<script src="js/content.js?v=1.0.0"></script>

		<!-- ECharts demo data -->
		<!--<script src="js/demo/echarts-demo.js"></script>-->

		<script src="js/demo/echartsDemoAllDe.js" type="text/javascript"></script>
		<script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
		<!--<script src="js/plugins/layer/laydate/laydate.js"></script>-->
		<!--<script type="text/javascript">
			//日期范围限制
			var start = {
				elem: '#start',
				format: 'YYYY/MM/DD hh:mm:ss',
				min: laydate.now(), //设定最小日期为当前日期
				max: '2099-06-16 23:59:59', //最大日期
				istime: true,
				istoday: false,
				choose: function(datas) {
					end.min = datas; //开始日选好后，重置结束日的最小日期
					end.start = datas; //将结束日的初始值设定为开始日
				}
			};
			var end = {
				elem: '#end',
				format: 'YYYY/MM/DD hh:mm:ss',
				min: laydate.now(),
				max: '2099-06-16 23:59:59',
				istime: true,
				istoday: false,
				choose: function(datas) {
					start.max = datas; //结束日选好后，重置开始日的最大日期
				}
			};
			laydate(start);
			laydate(end);
		</script>-->
		<script type="text/javascript">
//			选择周列表
			var weeklist="";			
			for (var i=1;i<12;i++) {
				weeklist+="<option >第"+i+"周</option>"
			}
			var addWeek=$('.addWeek').html(weeklist);
			
//			选择电表列表
			var Kwhlist="";			
			for (var i=1;i<12;i++) {
				Kwhlist+="<option >电表"+i+"</option>"
			}
			var chooseDev=$('.chooseDev').html(Kwhlist);
		</script>
		
		<!--post请求图表数据-->
<script type="text/javascript">
			
			$(".checkWeek").click(function(){
				//选中的电表值，日期值，周期值			
				var devWeek=$('.devWeek option:selected').val();
				var timeWeek=$(".timeWeek").val();
				var optionWeek=$('.optionWeek option:selected').val();
			alert(devWeek+"  "+timeWeek+"  "+optionWeek);
//			图表更新数据
			var echartsLineWeek = $("#echarts-line-chartWeek");
			echartsLineWeek.showLoading();
			jQuery.support.cors = true;
			$.ajax({
				url: "yuding_tab" + _index + ".html",
				type: 'post',
				data: {Kwhmeter:devWeek,dateTime:timeWeek,week:optionWeek},
				dataType: "json",
				xhrFields: {
					withCredentials: true
				},
				crossDomain: true,
				success: function(data) {
					echarts-line-chartWeek.hideLoading();
					option = {
						xAxis: {
							type: 'category',							
							data: [data.time ]
						},
						series: [{
							name: '功率',
							type: 'line',
							data: [data.electricity]
						}]

					};
					trendsElectricity.setOption(option);

				},
				error: function() {
					trendsElectricity.hideLoading();
					//  	alert('error');  
				}
			});
			});
		</script>
	</body>

</html>
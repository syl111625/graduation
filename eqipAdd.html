<!DOCTYPE html>
<html>

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>添加设备</title>
		<meta name="keywords" content="">
		<meta name="description" content="">

		<link rel="shortcut icon" href="favicon.ico">
		<link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
		<link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">
		<link href="css/animate.css" rel="stylesheet">
		<link href="css/style.css?v=4.1.0" rel="stylesheet">
		<style>
			.controlSize {
				height: 32px;
			}
		</style>
	</head>
	<!--管理员管理/添加管理员-->

	<body class="gray-bg">
		<div class="wrapper wrapper-content animated fadeInRight">

			<div class="row">

				<div class="col-sm-12">
					<div class="ibox float-e-margins">
						<div class="ibox-title">
							<h5>添加设备</h5>

						</div>
						<div class="ibox-content">
							<form class="form-horizontal " id="deviceForm">

								<div class="form-group">
									<div class="col-sm-8">
										<input id="ip" name="ip" value="192.168.0.13" class="form-control" type="hidden">
									</div>
								</div>
								<div class="form-group">
									<div class="col-sm-8">
										<input id="port" name="port" value="8878" class="form-control" type="hidden">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">名称：</label>
									<div class="col-sm-8">
										<input id="name" name="name" class="form-control" type="text" aria-required="true" aria-invalid="true">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">型号：</label>
									<div class="col-sm-8">
										<!--<input id="type" name="type" class="form-control" type="text">-->
										<select id="type" name="type" class="form-control controlSize">
											<option value="0">电表</option>
											<option value="1">网关</option>
										</select>
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">详细地址：</label>
									<div class="col-sm-8">
										<input id="address" name="address" class="form-control" type="text">

									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">开始使用时间：</label>
									<div class="col-sm-8">
										<input id="startUseTime" name="startUseTime" class="form-control" type="text" aria-required="true" aria-invalid="false" class="valid">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label">状态：</label>
									<div class="col-sm-8">
										<!--<input id="isNormal" name="isNormal" type="text" class="form-control" >-->
										<select id="isNormal" name="isNormal" class="form-control controlSize">
											<option value="0">异常</option>
											<option value="1">正常</option>
										</select>
									</div>
								</div>
								<!--<div class="form-group">
									<div class="col-sm-8 col-sm-offset-3">
										<div class="checkbox">
											<label>
                                            <input type="checkbox" class="checkbox" id="agree" name="agree"> 我已经认真阅读并同意协议
                                        </label>
										</div>
									</div>
								</div>-->
								<div class="form-group">
									<div class="col-sm-8 col-sm-offset-3">
										<button type="button" class="btn btn-primary deviceAdd">提交</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>

		</div>

		<!-- 全局js -->
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>

		<!-- 自定义js -->
		<script src="js/content.js?v=1.0.0"></script>

		<!-- jQuery Validation plugin javascript-->
		<script src="js/plugins/validate/jquery.validate.min.js"></script>
		<script src="js/plugins/validate/messages_zh.min.js"></script>

		<script src="js/demo/form-validate-demo.js"></script>
		<script src="js/url.js" type="text/javascript"></script>
		<script type="text/javascript">
			//添加设备			
			$(".deviceAdd").click(function() {

				//jQuery.support.cors = true;
				$.ajax({
					url: url + "device/saveDevice",
					type: 'post',
					data: $("#deviceForm").serialize(),
					dataType: "json",
					xhrFields: {
						withCredentials: true
					},
					crossDomain: true,
					async: false,
					success: function(data) {
						console.log(data);
						window.location.href = "equipmentList.html";
						console.log(window.location.href);
					},
					error: function() {
						alert('error');
					}
				});
			});
		</script>
	</body>

</html>